<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2013/12 | realguess</title>
  <meta name="author" content="Chao Huang">
  
  <meta name="description" content="Just a blog about every detail encountered.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="realguess"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="realguess" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45698182-1', 'realguess.net');
  ga('send', 'pageview');
</script>


</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">realguess</a></h1>
  <h2><a href="/">Don't afraid to try!</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">2013/12</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-21T00:03:47.000Z"><a href="/2013/12/20/obtain-total-number-of-notes-in-google-keep/">Dec 20, 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/20/obtain-total-number-of-notes-in-google-keep/">Obtain Total Number of Notes in Google Keep</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="https://drive.google.com/keep">Google Keep</a> is a quick note taking service, having a lot less features than others like <a href="https://evernote.com/">Evernote</a>. Therefore, you cannot even get the total number of notes. But you can quickly fire up a browser console, and type in the following script to get the note count:</p>
<pre><code><span class="transposed_variable">document.</span>getElementsByClassName(<span class="string">'IZ65Hb-n0tgWb'</span>).<span class="built_in">length</span></code></pre>
<p>No jQuery needed, and problem solved.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-20T00:56:13.000Z"><a href="/2013/12/19/split-json-file-into-multiple-parts/">Dec 19, 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/19/split-json-file-into-multiple-parts/">Split JSON File into Multiple Parts</a></h1>
  

    </header>
    <div class="entry">
      
        <p><code>mongoexport</code> allows us to export documents from MongoDB into a JSON file:</p>
<pre><code><span class="comment">$</span> <span class="comment">mongoexport</span> <span class="literal">-</span><span class="comment">d</span> <span class="comment">mydb</span> <span class="literal">-</span><span class="comment">c</span> <span class="comment">mycollection</span> <span class="literal">-</span><span class="comment">o</span> <span class="comment">myfile</span>.<span class="comment">json</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">jsonArray</code></pre>
<p>The <code>--jsonArray</code> option writes the entire content of the export as a single JSON array. Sometimes, the size of individual file is quite large, we need to break it down into small pieces, because most web servers will have a limit on how much data can be submitted at once. However, with the option, the entire document is a single line. Any line processing command cannot be easily used. We can omit the option (default behavior) and have the export utility to dump it one document at a time. The entire exported JSON file is technically not in correct JSON format, but each line, which represents a MongoDB document, is valid JSON, and can be used to do some command line processing.</p>
<p>To break a large file into many smaller pieces, we can use <code>split</code> command:</p>
<pre><code>$ split -l <span class="number">10</span> <span class="typedef"><span class="keyword">data</span>.json</span></code></pre>
<p>The <code>-l</code> or <code>--lines</code> option limits each file with a maximum of 10 lines.</p>
<p>Another way we can use <code>-C</code> or <code>--line-bytes</code> option to put at most 1k bytes of lines per output file:</p>
<pre><code><span class="comment">$</span> <span class="comment">split</span> <span class="literal">-</span><span class="comment">d</span> <span class="literal">-</span><span class="comment">a</span> <span class="comment">3</span> <span class="literal">-</span><span class="comment">C</span> <span class="comment">1k</span> <span class="comment">data</span>.<span class="comment">json</code></pre>
<p>One thing needs to make sure is that the size of each line is no more than the maximum size specified by the option, otherwise, partial lines will be generated.</p>
<p>It is good to keep all those parts in their own directory:</p>
<pre><code><span class="comment">$</span> <span class="comment">mkdir</span> <span class="comment">pieces</span> <span class="comment">&amp;&amp;</span> <span class="comment">cd</span> <span class="comment">pieces</span> <span class="comment">&amp;&amp;</span> <span class="comment">split</span> <span class="literal">-</span><span class="comment">d</span> <span class="literal">-</span><span class="comment">a</span> <span class="comment">3</span> <span class="literal">-</span><span class="comment">C</span> <span class="comment">1k</span> <span class="string">.</span><span class="string">.</span><span class="comment">/data</span>.<span class="comment">json</span> <span class="comment">&amp;&amp;</span> <span class="comment">cd</span> <span class="string">.</span><span class="string">.</span></code></pre>
<p>Unless breaking the file into one line at a time, otherwise, we need to convert individual JSON file into correct JSON format:</p>
<pre><code><span class="formula">$ find pieces/* -exec sh -c <span class="command">\
</span>&gt; "awk 'BEGIN<span class="special">{</span>l=<span class="command">\"</span><span class="special">[</span><span class="command">\"</span><span class="special">}</span><span class="special">{</span>print l;l=<span class="command">\$</span>0<span class="command">\"</span>,<span class="command">\"</span><span class="special">}</span>END<span class="special">{</span>print<span class="command">\$</span>0<span class="command">\"</span><span class="command">\n</span><span class="special">]</span><span class="command">\"</span><span class="special">}</span>' <span class="command">\
</span>&gt; <span class="special">{</span><span class="special">}</span> &gt; <span class="special">{</span><span class="special">}</span>.json <span class="special">&amp;</span><span class="special">&amp;</span> rm <span class="special">{</span><span class="special">}</span>" <span class="command">\;</span></code></pre>
<p>The output JSON file will contains an array of MongoDB documents. The main idea of the AWK script is to print out previous line as it reads the current line. <code>BEGIN { l = &quot;[&quot; }</code> defines the first line as the opening square bracket, and the <code>END { print $0&quot;\n&quot; }</code> prints the last line of the file and the closing square bracket.</p>
<p>There bounds to be a better way. Just need to keep looking.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-18T23:12:43.000Z"><a href="/2013/12/18/set-filename-path-with-processcwd()/">Dec 18, 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/18/set-filename-path-with-processcwd()/">Set Filename Path with process.cwd()</a></h1>
  

    </header>
    <div class="entry">
      
        <p>When working with <a href="http://nodejs.org/api/fs.html">file system</a> in Node, you will need a fully qualified filename to do things like reading the content of a file:</p>
<pre><code><span class="function"><span class="title">require</span><span class="params">('fs')</span>.<span class="title">readFile</span><span class="params">(filename, function (err, data) <span class="tuple">{}</span>);</code></pre>
<p>If you have the following directory structure:</p>
<pre><code>.
├── app<span class="variable">.js</span>
├── data
│   └── file<span class="variable">.txt</span>
└── lib
    └── reader<span class="variable">.js</span></code></pre>
<p>There are two ways to read the content of <code>data/file.txt</code> from <code>lib/reader.js</code>:</p>
<p>Use the current directory of the script <code>__dirname</code>:</p>
<pre><code><span class="comment">filename</span> <span class="comment">=</span> <span class="comment">__dirname</span> <span class="literal">+</span> <span class="comment">'/</span>.<span class="string">.</span><span class="comment">/data/file</span>.<span class="comment">txt';</code></pre>
<p>or with <code>path.join</code> to normalize the resulting path:</p>
<pre><code><span class="setting">filename = <span class="value">path.join(__dirname, '../data/file.txt');</span></span></code></pre>
<p>The second method is to use the current working directory of the process <code>process.cwd()</code>:</p>
<pre><code><span class="setting">filename = <span class="value">process.cwd() + '/data/file.txt';</span></span></code></pre>
<p>The second approach is more portable. If you move <code>lib/reader.js</code> to <code>lib/utils/reader.js</code>, no code change will be needed. But make sure the directory of the Node process is the application root directory where <code>node app.js</code> is being issued.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-18T02:05:38.000Z"><a href="/2013/12/17/small-markdown-features-on-ghost-blogging-platform/">Dec 17, 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/17/small-markdown-features-on-ghost-blogging-platform/">Small Markdown Features on Ghost Blogging Platform</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I have known about <a href="http://ghost.org/">Ghost</a> since its <a href="http://www.kickstarter.com/projects/johnonolan/ghost-just-a-blogging-platform">KickStarter campaign</a>. And recently they just launched the hosted platform for Ghost. I like to set up and run it myself, but the hosted platform is 100% customized to run Ghost blogs. So it could be more efficient and reliable than tinkering on my own. While I was testing it, I have noticed two small <a href="http://daringfireball.net/projects/markdown/">Markdown</a> features supported by Ghost:</p>
<p><strong>Automatic links</strong></p>
<p>You do not need to enclose the fully qualified URL in angular brackets, URL like <code>http://ghost.org</code> will be automatically linked up. But this works well without language like English where a space denotes as a separator. When I work with language like Chinese, this frequently creating a problem where the Chinese characters are treated as parts of the link. Therefore, I still prefer to write it with angular brackets and get into the habit in doing:</p>
<pre><code><span class="tag">&lt;<span class="title">http:</span>//<span class="attribute">ghost.org</span>/&gt;</span></code></pre>
<p><strong>Line divider</strong></p>
<p>One feature I like so far is the support of a line divider. Just need three dashes in a line, it will be converted into a fancy divider. This is great for writing references and footnotes.</p>
<p><em><small>This is a quick blog for getting started with Ghost.</small></em></p>
<hr>
<p>Exploration continues…</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-10T02:09:08.000Z"><a href="/2013/12/09/insert-text-to-the-beginning-of-a-file/">Dec 9, 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/09/insert-text-to-the-beginning-of-a-file/">Insert Text to the Beginning of a File</a></h1>
  

    </header>
    <div class="entry">
      
        <p>It is easy to append some text to the end of another file:</p>
<pre><code><span class="variable">$ </span>cat foo &gt;&gt; bar</code></pre>
<p>or even just portion of a file:</p>
<pre><code><span class="comment">$</span> <span class="comment">head</span> <span class="literal">-</span><span class="comment">n</span> <span class="comment">2</span> <span class="comment">foo</span> &gt;&gt; <span class="comment">bar</code></pre>
<p>but how about to the beginning of a file? Well, it is not that bad to do either:</p>
<pre><code>$ <span class="keyword">echo</span> <span class="string">"$(cat foo bar)"</span> &gt; bar</code></pre>
<p>just a portion of a file:</p>
<pre><code>$ echo <span class="string">"<span class="variable">$(</span>head -n 2 foo)\n<span class="variable">$(</span>cat bar)"</span> &gt; bar</code></pre>
<p>Now you can easily add some text such as copyright information to the beginning of another file with one command.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-06T18:55:55.000Z"><a href="/2013/12/06/amazon-route-53-via-command-line/">Dec 6, 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/06/amazon-route-53-via-command-line/">Amazon Route 53 via Command Line</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Retrieve a list of hosted zones:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="variable">$ </span>aws route53 list-hosted-zones          
{
  <span class="string">"HostedZones"</span><span class="symbol">:</span> [
    {
        <span class="string">"ResourceRecordSetCount"</span><span class="symbol">:</span> <span class="number">4</span>,
        <span class="string">"CallerReference"</span><span class="symbol">:</span> <span class="string">"12345678-ABCD-EFGH-IJKL-ABCDEFGHIJKL"</span>,
        <span class="string">"Config"</span><span class="symbol">:</span> {},
        <span class="string">"Id"</span><span class="symbol">:</span> <span class="string">"/hostedzone/1234567890ABC"</span>,
        <span class="string">"Name"</span><span class="symbol">:</span> <span class="string">"realguess.net."</span>
    }
  ], 
  <span class="string">"IsTruncated"</span><span class="symbol">:</span> <span class="keyword">false</span>, 
  <span class="string">"MaxItems"</span><span class="symbol">:</span> <span class="string">"100"</span>
}
</pre></td></tr></table></figure>

<p>Get a single hosted zone with delegation set (four Route 53 name servers that were assigned to the hosted zone):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>$ aws route53 get-hosted-zone <span class="comment">--id 1234567890ABC</span>
{
  "HostedZone": {
    "ResourceRecordSetCount": 4,
    "CallerReference": "12345678-ABCD-EFGH-IJKL-ABCDEFGHIJKL",
    "Config": {},
    "Id": "/hostedzone/1234567890ABC",
    "Name": "realguess.net."
  },
  "Delegation<span class="operator"><span class="keyword">Set</span><span class="string">": {
    "</span>NameServers<span class="string">": [
      "</span>ns-<span class="number">1727.</span>awsdns-<span class="number">23.</span>co.uk<span class="string">",
      "</span>ns-<span class="number">1312.</span>awsdns-<span class="number">36.</span>org<span class="string">",
      "</span>ns-<span class="number">402.</span>awsdns-<span class="number">50.</span>com<span class="string">",
      "</span>ns-<span class="number">587.</span>awsdns-<span class="number">09.</span>net<span class="string">"
    ]
  }
}
</pre></td></tr></table></figure>

<p>List all resource record sets in a hosted zone:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre></td><td class="code"><pre><span class="comment">$</span> <span class="comment">aws</span> <span class="comment">route53</span> <span class="comment">list</span>-<span class="comment">resource</span>-<span class="comment">record</span>-<span class="comment">sets</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">hosted</span>-<span class="comment">zone</span>-<span class="comment">id</span> <span class="comment">1234567890ABC</span>
<span class="comment">{</span>
  <span class="comment">"IsTruncated":</span> <span class="comment">false</span>,
  <span class="comment">"ResourceRecordSets":</span> <span class="title">[</span>
    <span class="comment">{</span>
      <span class="comment">"ResourceRecords":</span> <span class="title">[</span>
        <span class="comment">{</span>
          <span class="comment">"Value":</span> <span class="comment">"192</span>.<span class="comment">168</span>.<span class="comment">153</span>.<span class="comment">123"</span>
        <span class="comment">}</span>
      <span class="title">]</span><span class="string">,</span>
      <span class="comment">"Type":</span> <span class="comment">"A"</span>,
      <span class="comment">"Name":</span> <span class="comment">"realguess</span>.<span class="comment">net</span>.<span class="comment">"</span>,
      <span class="comment">"TTL":</span> <span class="comment">172800</span>
    <span class="comment">}</span>,
    <span class="comment">{</span>
      <span class="comment">"ResourceRecords":</span> <span class="title">[</span>
        <span class="comment">{</span>
          <span class="comment">"Value":</span> <span class="comment">"ns</span>-<span class="comment">1727</span>.<span class="comment">awsdns</span>-<span class="comment">23</span>.<span class="comment">co</span>.<span class="comment">uk</span>.<span class="comment">"</span>
        <span class="comment">}</span>,
        <span class="comment">{</span>
          <span class="comment">"Value":</span> <span class="comment">"ns</span>-<span class="comment">1312</span>.<span class="comment">awsdns</span>-<span class="comment">36</span>.<span class="comment">org</span>.<span class="comment">"</span>
        <span class="comment">}</span>,
        <span class="comment">{</span>
          <span class="comment">"Value":</span> <span class="comment">"ns</span>-<span class="comment">402</span>.<span class="comment">awsdns</span>-<span class="comment">50</span>.<span class="comment">com</span>.<span class="comment">"</span>
        <span class="comment">}</span>,
        <span class="comment">{</span>
          <span class="comment">"Value":</span> <span class="comment">"ns</span>-<span class="comment">587</span>.<span class="comment">awsdns</span>-<span class="comment">09</span>.<span class="comment">net</span>.<span class="comment">"</span>
        <span class="comment">}</span>
      <span class="title">]</span><span class="string">,</span> 
      <span class="comment">"Type":</span> <span class="comment">"NS"</span>,
      <span class="comment">"Name":</span> <span class="comment">"realguess</span>.<span class="comment">net</span>.<span class="comment">"</span>,
      <span class="comment">"TTL":</span> <span class="comment">172800</span>
    <span class="comment">}</span>, 
    <span class="comment">{</span>
      <span class="comment">"ResourceRecords":</span> <span class="title">[</span>
        <span class="comment">{</span>
          <span class="comment">"Value":</span> <span class="comment">"ns</span>-<span class="comment">1727</span>.<span class="comment">awsdns</span>-<span class="comment">23</span>.<span class="comment">co</span>.<span class="comment">uk</span>. <span class="comment">awsdns</span>-<span class="comment">hostmaster</span>.<span class="comment">amazon</span>.<span class="comment">com</span>. <span class="comment">1</span> <span class="comment">7200</span> <span class="comment">900</span> <span class="comment">1209600</span> <span class="comment">86400"</span>
        <span class="comment">}</span>
      <span class="title">]</span><span class="string">,</span> 
      <span class="comment">"Type":</span> <span class="comment">"SOA"</span>,
      <span class="comment">"Name":</span> <span class="comment">"realguess</span>.<span class="comment">net</span>.<span class="comment">"</span>,
      <span class="comment">"TTL":</span> <span class="comment">900</span>
    <span class="comment">}</span>,
    <span class="comment">{</span>
      <span class="comment">"ResourceRecords":</span> <span class="title">[</span>
        <span class="comment">{</span>
          <span class="comment">"Value":</span> <span class="comment">"192</span>.<span class="comment">168</span>.<span class="comment">153</span>.<span class="comment">123"</span>
        <span class="comment">}</span>
      <span class="title">]</span><span class="string">,</span>
      <span class="comment">"Type":</span> <span class="comment">"A"</span>,
      <span class="comment">"Name":</span> <span class="comment">"www</span>.<span class="comment">realguess</span>.<span class="comment">net</span>.<span class="comment">"</span>,
      <span class="comment">"TTL":</span> <span class="comment">86400</span>
    <span class="comment">}</span>
  <span class="title">]</span><span class="string">,</span>
  <span class="comment">"MaxItems":</span> <span class="comment">"100"</span>
<span class="comment">}
</pre></td></tr></table></figure>

<p>Retrieve a single record set:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="comment">$</span> <span class="comment">aws</span> <span class="comment">route53</span> <span class="comment">list</span>-<span class="comment">resource</span>-<span class="comment">record</span>-<span class="comment">sets</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">hosted</span>-<span class="comment">zone</span>-<span class="comment">id</span> <span class="comment">1234567890ABC</span> <span class="comment">\</span>
  <span class="literal">-</span><span class="literal">-</span><span class="comment">start</span>-<span class="comment">record</span>-<span class="comment">name</span> <span class="comment">www</span>.<span class="comment">realguess</span>.<span class="comment">net</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">start</span>-<span class="comment">record</span>-<span class="comment">type</span> <span class="comment">A</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">max</span>-<span class="comment">items</span> <span class="comment">1</span>
<span class="comment">{</span>
  <span class="comment">"IsTruncated":</span> <span class="comment">false</span>,
  <span class="comment">"ResourceRecordSets":</span> <span class="title">[</span>
    <span class="comment">{</span>
      <span class="comment">"ResourceRecords":</span> <span class="title">[</span>
        <span class="comment">{</span>
          <span class="comment">"Value":</span> <span class="comment">"192</span>.<span class="comment">168</span>.<span class="comment">153</span>.<span class="comment">123"</span>
        <span class="comment">}</span>
      <span class="title">]</span><span class="string">,</span>
      <span class="comment">"Type":</span> <span class="comment">"A"</span>,
      <span class="comment">"Name":</span> <span class="comment">"www</span>.<span class="comment">realguess</span>.<span class="comment">net</span>.<span class="comment">"</span>,
      <span class="comment">"TTL":</span> <span class="comment">86400</span>
    <span class="comment">}</span>
  <span class="title">]</span><span class="string">,</span>
  <span class="comment">"MaxItems":</span> <span class="comment">"1"</span>
<span class="comment">}
</pre></td></tr></table></figure>

<p>In order to create a new record set, first create a JSON file to describe the new record:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>{
  "<span class="attribute">Comment</span>": <span class="value"><span class="string">"A new record set for the zone."</span></span>,
  "<span class="attribute">Changes</span>": <span class="value">[
    {
      "<span class="attribute">Action</span>": <span class="value"><span class="string">"CREATE"</span></span>,
      "<span class="attribute">ResourceRecordSet</span>": <span class="value">{
        "<span class="attribute">Name</span>": <span class="value"><span class="string">"api.realguess.net."</span></span>,
        "<span class="attribute">Type</span>": <span class="value"><span class="string">"CNAME"</span></span>,
        "<span class="attribute">TTL</span>": <span class="value"><span class="number">60</span></span>,
        "<span class="attribute">ResourceRecords</span>": <span class="value">[
          {
            "<span class="attribute">Value</span>": <span class="value"><span class="string">"www.realguess.net"</span>
          }</span>
        ]
      }</span>
    }</span>
  ]
}</span>
</pre></td></tr></table></figure>

<p>Add a new record set (note that the JSON file must use <code>file://</code> starting path):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre>$ aws route53 change-resource-record-sets <span class="comment">--hosted-zone-id 1234567890ABC \</span>
  <span class="comment">--change-batch file:///path/to/record.json</span>
{
  "ChangeInfo": {
    "Status": "PENDING",
    "Comment": "A new record <span class="operator"><span class="keyword">set</span> <span class="keyword">for</span> the <span class="keyword">zone</span>.<span class="string">",
    "</span>SubmittedAt<span class="string">": "</span><span class="number">2013</span>-<span class="number">12</span>-<span class="number">06</span>T00:<span class="number">00</span>:<span class="number">00.000</span>Z<span class="string">",
    "</span>Id<span class="string">": "</span>/change/CHANGEID123<span class="string">"
  }
}
</pre></td></tr></table></figure>

<p>The status of adding the new record is currently <em>pending</em>. Poll the server to get the updated status:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>$ aws route53 get-change <span class="comment">--id CHANGEID123</span>
{
  "ChangeInfo": {
    "Status": "INSYNC",
    "Comment": "A new record <span class="operator"><span class="keyword">set</span> <span class="keyword">for</span> the <span class="keyword">zone</span>.<span class="string">",
    "</span>SubmittedAt<span class="string">": "</span><span class="number">2013</span>-<span class="number">12</span>-<span class="number">06</span>T00:<span class="number">00</span>:<span class="number">00.000</span>Z<span class="string">",
    "</span>Id<span class="string">": "</span>/change/CHANGEID123<span class="string">"
  }
}
</pre></td></tr></table></figure>

<p>A new record has been created and has been propagated to all hosts.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2013-12-05T01:34:59.000Z"><a href="/2013/12/04/configuration-setup-and-loading-precedence/">Dec 4, 2013</a></time>
      
      
  
    <h1 class="title"><a href="/2013/12/04/configuration-setup-and-loading-precedence/">Configuration Setup and Loading Precedence</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Loading precedence (latter overrides former):</p>
<ol>
<li>Load application default settings (<code>config/default.yml</code>)</li>
<li>Load environment settings</li>
<li>Load custom settings</li>
</ol>
<p>Default settings of the application is provided by the upstream, therefore, it should not be modified.</p>
<p>There are four types of environments: <code>development</code>, <code>testing</code>, <code>staging</code> and <code>production</code>. Environment can be set by using the shell environment variable: <code>ENV</code>. If the environment variable is not specified, it is set to <code>development</code> as default. Environment settings override default settings.</p>
<p>Custom settings override environment settings. The search path for custom settings is:</p>
<ol>
<li>Environment variable <code>SETTINGS</code></li>
<li><code>config/settings.yml</code></li>
</ol>
<p>If both paths are not available, that means the custom settings are not specified.</p>
<p><code>config/settings.yml</code> is a custom settings, therefore, it will be ignored by git in <code>.gitignore</code> file:</p>
<pre><code>config/<span class="filename">settings.yml</code></pre>
<p>The complete directory structure regarding to the configuration setup:</p>
<pre><code>config/
├── <span class="keyword">default</span><span class="variable">.yml</span>
├── environments
│   ├── development<span class="variable">.yml</span>
│   ├── production<span class="variable">.yml</span>
│   ├── staging<span class="variable">.yml</span>
│   └── testing<span class="variable">.yml</span>
└── settings<span class="variable">.yml</span></code></pre>
<p>Quick start command:</p>
<pre><code><span class="variable">$ </span>node app</code></pre>
<p>Fully customized start command:</p>
<pre><code><span class="variable">$ </span><span class="constant">ENV</span>=production <span class="constant">SETTINGS</span>=<span class="regexp">/path/to</span><span class="regexp">/settings.yml node app</code></pre>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:realguess.net">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/2013/">2013</a><small>1</small></li>
  
    <li><a href="/tags/absolute-path/">absolute-path</a><small>1</small></li>
  
    <li><a href="/tags/amazon/">amazon</a><small>1</small></li>
  
    <li><a href="/tags/amtrak/">amtrak</a><small>1</small></li>
  
    <li><a href="/tags/android/">android</a><small>1</small></li>
  
    <li><a href="/tags/android-4.3/">android-4.3</a><small>1</small></li>
  
    <li><a href="/tags/anonymous-function/">anonymous-function</a><small>1</small></li>
  
    <li><a href="/tags/array/">array</a><small>2</small></li>
  
    <li><a href="/tags/automatic-link/">automatic-link</a><small>1</small></li>
  
    <li><a href="/tags/awk/">awk</a><small>1</small></li>
  
    <li><a href="/tags/aws/">aws</a><small>2</small></li>
  
    <li><a href="/tags/aws-cli/">aws-cli</a><small>1</small></li>
  
    <li><a href="/tags/best-practice/">best-practice</a><small>1</small></li>
  
    <li><a href="/tags/big-apple/">big-apple</a><small>1</small></li>
  
    <li><a href="/tags/big-easy/">big-easy</a><small>1</small></li>
  
    <li><a href="/tags/big-number/">big-number</a><small>1</small></li>
  
    <li><a href="/tags/browser/">browser</a><small>1</small></li>
  
    <li><a href="/tags/cat/">cat</a><small>1</small></li>
  
    <li><a href="/tags/chat/">chat</a><small>1</small></li>
  
    <li><a href="/tags/chrome/">chrome</a><small>1</small></li>
  
    <li><a href="/tags/cli/">cli</a><small>1</small></li>
  
    <li><a href="/tags/cloud-storage/">cloud-storage</a><small>1</small></li>
  
    <li><a href="/tags/cocoon/">cocoon</a><small>1</small></li>
  
    <li><a href="/tags/coding-style/">coding-style</a><small>1</small></li>
  
    <li><a href="/tags/coffeelint/">coffeelint</a><small>1</small></li>
  
    <li><a href="/tags/coffeescript/">coffeescript</a><small>7</small></li>
  
    <li><a href="/tags/command-history/">command-history</a><small>1</small></li>
  
    <li><a href="/tags/command-line/">command-line</a><small>1</small></li>
  
    <li><a href="/tags/command-line-interface/">command-line-interface</a><small>1</small></li>
  
    <li><a href="/tags/configuration/">configuration</a><small>1</small></li>
  
    <li><a href="/tags/crescent/">crescent</a><small>1</small></li>
  
    <li><a href="/tags/cron/">cron</a><small>2</small></li>
  
    <li><a href="/tags/crontab/">crontab</a><small>1</small></li>
  
    <li><a href="/tags/cryptography/">cryptography</a><small>1</small></li>
  
    <li><a href="/tags/custom-domain/">custom-domain</a><small>1</small></li>
  
    <li><a href="/tags/custom-generator/">custom-generator</a><small>1</small></li>
  
    <li><a href="/tags/cwd/">cwd</a><small>1</small></li>
  
    <li><a href="/tags/datagram/">datagram</a><small>1</small></li>
  
    <li><a href="/tags/date/">date</a><small>1</small></li>
  
    <li><a href="/tags/diff/">diff</a><small>1</small></li>
  
    <li><a href="/tags/distributed-team/">distributed-team</a><small>1</small></li>
  
    <li><a href="/tags/docco/">docco</a><small>1</small></li>
  
    <li><a href="/tags/echo/">echo</a><small>1</small></li>
  
    <li><a href="/tags/ecmascript-harmony/">ecmascript-harmony</a><small>1</small></li>
  
    <li><a href="/tags/encryption/">encryption</a><small>1</small></li>
  
    <li><a href="/tags/environment/">environment</a><small>2</small></li>
  
    <li><a href="/tags/environment-variable/">environment-variable</a><small>1</small></li>
  
    <li><a href="/tags/express/">express</a><small>1</small></li>
  
    <li><a href="/tags/file-system/">file-system</a><small>1</small></li>
  
    <li><a href="/tags/filename/">filename</a><small>1</small></li>
  
    <li><a href="/tags/fs/">fs</a><small>1</small></li>
  
    <li><a href="/tags/function/">function</a><small>3</small></li>
  
    <li><a href="/tags/function-declaration/">function-declaration</a><small>2</small></li>
  
    <li><a href="/tags/function-expression/">function-expression</a><small>3</small></li>
  
    <li><a href="/tags/function-innovation/">function-innovation</a><small>1</small></li>
  
    <li><a href="/tags/generator/">generator</a><small>1</small></li>
  
    <li><a href="/tags/get/">get</a><small>1</small></li>
  
    <li><a href="/tags/ghost/">ghost</a><small>1</small></li>
  
    <li><a href="/tags/github/">github</a><small>1</small></li>
  
    <li><a href="/tags/goal/">goal</a><small>1</small></li>
  
    <li><a href="/tags/google-keep/">google-keep</a><small>1</small></li>
  
    <li><a href="/tags/grunt/">grunt</a><small>1</small></li>
  
    <li><a href="/tags/grunt-contrib-jshint/">grunt-contrib-jshint</a><small>1</small></li>
  
    <li><a href="/tags/grunt-contrib-watch/">grunt-contrib-watch</a><small>1</small></li>
  
    <li><a href="/tags/guard/">guard</a><small>1</small></li>
  
    <li><a href="/tags/head/">head</a><small>2</small></li>
  
    <li><a href="/tags/hipchat/">hipchat</a><small>1</small></li>
  
    <li><a href="/tags/hong-kong/">hong-kong</a><small>1</small></li>
  
    <li><a href="/tags/hosted-zone/">hosted-zone</a><small>1</small></li>
  
    <li><a href="/tags/http/">http</a><small>1</small></li>
  
    <li><a href="/tags/id/">id</a><small>1</small></li>
  
    <li><a href="/tags/iife/">iife</a><small>2</small></li>
  
    <li><a href="/tags/immediately-invoked-function-expression/">immediately-invoked-function-expression</a><small>2</small></li>
  
    <li><a href="/tags/interpreter/">interpreter</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>8</small></li>
  
    <li><a href="/tags/jelly-bean/">jelly-bean</a><small>1</small></li>
  
    <li><a href="/tags/join/">join</a><small>1</small></li>
  
    <li><a href="/tags/jshint/">jshint</a><small>1</small></li>
  
    <li><a href="/tags/json/">json</a><small>1</small></li>
  
    <li><a href="/tags/koa/">koa</a><small>1</small></li>
  
    <li><a href="/tags/line-divider/">line-divider</a><small>1</small></li>
  
    <li><a href="/tags/linux/">linux</a><small>3</small></li>
  
    <li><a href="/tags/livereload/">livereload</a><small>1</small></li>
  
    <li><a href="/tags/markdown/">markdown</a><small>2</small></li>
  
    <li><a href="/tags/mi3/">mi3</a><small>1</small></li>
  
    <li><a href="/tags/mongodb/">mongodb</a><small>1</small></li>
  
    <li><a href="/tags/mongoexport/">mongoexport</a><small>1</small></li>
  
    <li><a href="/tags/multi-parts/">multi-parts</a><small>1</small></li>
  
    <li><a href="/tags/named-function/">named-function</a><small>1</small></li>
  
    <li><a href="/tags/nb/">nb</a><small>1</small></li>
  
    <li><a href="/tags/network/">network</a><small>1</small></li>
  
    <li><a href="/tags/new-orleans/">new-orleans</a><small>1</small></li>
  
    <li><a href="/tags/new-york/">new-york</a><small>1</small></li>
  
    <li><a href="/tags/node/">node</a><small>8</small></li>
  
    <li><a href="/tags/nodemon/">nodemon</a><small>1</small></li>
  
    <li><a href="/tags/normalization/">normalization</a><small>1</small></li>
  
    <li><a href="/tags/nota-bene/">nota-bene</a><small>1</small></li>
  
    <li><a href="/tags/note-well/">note-well</a><small>1</small></li>
  
    <li><a href="/tags/npm/">npm</a><small>1</small></li>
  
    <li><a href="/tags/npm-module/">npm-module</a><small>1</small></li>
  
    <li><a href="/tags/null/">null</a><small>1</small></li>
  
    <li><a href="/tags/object/">object</a><small>1</small></li>
  
    <li><a href="/tags/parseint/">parseint</a><small>1</small></li>
  
    <li><a href="/tags/path/">path</a><small>3</small></li>
  
    <li><a href="/tags/ping/">ping</a><small>1</small></li>
  
    <li><a href="/tags/preinstall/">preinstall</a><small>1</small></li>
  
    <li><a href="/tags/process/">process</a><small>1</small></li>
  
    <li><a href="/tags/proxy/">proxy</a><small>1</small></li>
  
    <li><a href="/tags/query-parameter/">query-parameter</a><small>1</small></li>
  
    <li><a href="/tags/record-set/">record-set</a><small>1</small></li>
  
    <li><a href="/tags/relative-path/">relative-path</a><small>1</small></li>
  
    <li><a href="/tags/remote-working/">remote-working</a><small>1</small></li>
  
    <li><a href="/tags/repl/">repl</a><small>1</small></li>
  
    <li><a href="/tags/require/">require</a><small>1</small></li>
  
    <li><a href="/tags/rlwrap/">rlwrap</a><small>1</small></li>
  
    <li><a href="/tags/route-53/">route-53</a><small>1</small></li>
  
    <li><a href="/tags/scaffolding/">scaffolding</a><small>1</small></li>
  
    <li><a href="/tags/script/">script</a><small>1</small></li>
  
    <li><a href="/tags/settings/">settings</a><small>1</small></li>
  
    <li><a href="/tags/shabang/">shabang</a><small>1</small></li>
  
    <li><a href="/tags/sharing/">sharing</a><small>1</small></li>
  
    <li><a href="/tags/shebang/">shebang</a><small>1</small></li>
  
    <li><a href="/tags/shell/">shell</a><small>1</small></li>
  
    <li><a href="/tags/shell-script/">shell-script</a><small>1</small></li>
  
    <li><a href="/tags/source-maps/">source-maps</a><small>1</small></li>
  
    <li><a href="/tags/split/">split</a><small>1</small></li>
  
    <li><a href="/tags/sshuttle/">sshuttle</a><small>1</small></li>
  
    <li><a href="/tags/startup/">startup</a><small>1</small></li>
  
    <li><a href="/tags/stats/">stats</a><small>1</small></li>
  
    <li><a href="/tags/success/">success</a><small>1</small></li>
  
    <li><a href="/tags/sync/">sync</a><small>1</small></li>
  
    <li><a href="/tags/time-zone/">time-zone</a><small>1</small></li>
  
    <li><a href="/tags/todo/">todo</a><small>1</small></li>
  
    <li><a href="/tags/train/">train</a><small>1</small></li>
  
    <li><a href="/tags/travel/">travel</a><small>1</small></li>
  
    <li><a href="/tags/tumblr/">tumblr</a><small>1</small></li>
  
    <li><a href="/tags/twitter/">twitter</a><small>1</small></li>
  
    <li><a href="/tags/ubuntu/">ubuntu</a><small>1</small></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs</a><small>1</small></li>
  
    <li><a href="/tags/underscore/">underscore</a><small>1</small></li>
  
    <li><a href="/tags/unix/">unix</a><small>1</small></li>
  
    <li><a href="/tags/username/">username</a><small>1</small></li>
  
    <li><a href="/tags/vim/">vim</a><small>2</small></li>
  
    <li><a href="/tags/vimdiff/">vimdiff</a><small>1</small></li>
  
    <li><a href="/tags/vpn/">vpn</a><small>1</small></li>
  
    <li><a href="/tags/web-framework/">web-framework</a><small>1</small></li>
  
    <li><a href="/tags/xiaomi/">xiaomi</a><small>1</small></li>
  
    <li><a href="/tags/yeoman/">yeoman</a><small>1</small></li>
  
    <li><a href="/tags/yield/">yield</a><small>1</small></li>
  
    <li><a href="/tags/小米/">小米</a><small>1</small></li>
  
    <li><a href="/tags/小米手机/">小米手机</a><small>1</small></li>
  
  </ul>
</div>


  

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 Chao Huang
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>